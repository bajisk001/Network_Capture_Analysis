# ICMP Capture Analysis

## 1. Overview of ICMP
- **ICMP (Internet Control Message Protocol)** is a network layer protocol used for sending error messages and operational information in IP networks.  
- Often called the **‚Äúnetwork diagnostic protocol‚Äù**, it helps devices communicate issues like unreachable hosts or network congestion.  
- Commonly seen in **ping** and **traceroute** commands.  

### How ICMP works (simplified):
1. Your computer sends an ICMP **Echo Request** to a target host (e.g., elevatelabs.org).  
2. The host replies with an ICMP **Echo Reply**.  
3. Each request/response helps measure connectivity, packet loss, and round-trip time (RTT).  

---

## üéØ Objective
- Capture live **ICMP network packets** and identify packet types and traffic behaviour.  

- **Task:** Generate ICMP traffic using ping or traceroute and analyze it with Wireshark.  
- **Focus:** Observe Echo Requests, Echo Replies, and ICMP error messages.  

---

## üõ† Tools Used
- **Wireshark** (free, GUI-based packet capture tool).  
- **ping / traceroute** to generate ICMP traffic.  

---

## üìÇ Deliverables
1. A **packet capture file (.pcap)** containing ICMP traffic.  
2. A **short report** summarizing ICMP packet types, fields, and behaviour.  

---

## üß≠ Steps to Capture Packets

### 1. Traffic Generation
- Start Wireshark and begin capture on your active network interface.  
- Generate ICMP traffic using commands like:
- ping elevatelabs.org
- Let the capture run for ~30‚Äì60 seconds, then stop capture.

### 2. Packet Capture Details

-   Tool used: Wireshark
-   Display filter (for analysis): icmp

**Typical packets to look for:**

-   Echo Request (Client ‚Üí Server) ‚Äî initiates the ping.
-   Echo Reply (Server ‚Üí Client) ‚Äî responds to the ping.
-   ICMP Error messages ‚Äî e.g., Destination Unreachable, Time Exceeded.

---

### 3. Important ICMP Packet Fields (Explained Simply)

| Field / Item      | What it Means in Layman Terms                                    |
| :---------------- | :--------------------------------------------------------------- |
| **Type**          | Identifies the ICMP message type (e.g., Echo Request = 8, Echo Reply = 0). |
| **Code**          | Provides additional information about the type (e.g., network unreachable). |
| **Checksum**      | Error-check to ensure packet integrity.                         |
| **Identifier**    | Used to match Echo Requests with Echo Replies.                   |
| **Sequence Number** | Incremented for each Echo Request to track lost packets.         |
| **Payload / Data**  | Optional data sent with the packet, often used to measure RTT.   |

---

### 4. Protocol Recognition in Wireshark

-   **Protocol column:** shows ICMP.
-   **Info column:** contains human-friendly summary, e.g.:
    -   Echo (ping) request
    -   Echo (ping) reply
    -   Destination Unreachable
-   **Useful display filters:**
    ```
    icmp ‚Äî show all ICMP packets
    icmp.type == 8 ‚Äî Echo Requests only
    icmp.type == 0 ‚Äî Echo Replies only
    ```

---

### 5. Communication Flow (Step-by-Step)

-   Client sends Echo Request: asks the server ‚Äúare you reachable?‚Äù
-   Server sends Echo Reply: responds ‚ÄúI am reachable‚Äù
-   Optional ICMP errors: may indicate issues like host/network unreachable or TTL exceeded

**Example Flow:**

-   Client ‚Üí Server: ICMP Echo Request (ping)
-   Server ‚Üí Client: ICMP Echo Reply

---

### 6. Observations / Notes (What to look for in capture)

-   **No handshake:** ICMP is stateless; each message is independent.
-   **Round Trip Time (RTT):** Measured by comparing timestamps of Echo Request/Reply.
-   **Packet loss:** Missing replies indicate network issues.
-   **Multiple protocols:** In the same capture, you may also see DNS (UDP), TCP (HTTP/HTTPS) traffic.

---

### ‚úÖ Outcome

-   Learned how to capture ICMP packets with Wireshark.
-   Observed connectionless request/reply communication.
-   Identified ICMP-specific fields (Type, Code, Identifier, Sequence Number).
-   Recognized related protocols in a live capture (DNS, TCP/HTTP, UDP).

---

### üìé File Included

-   `icmp_capture.pcap` ‚Äî contains ICMP traffic generated by pinging elevatelabs.org.

---

### üí° Quick Wireshark Tips (for beginners)

-   Start capture on the interface that has your internet connection (Wi-Fi/Ethernet).
-   Use Display Filter `icmp` to focus on ICMP packets.
-   To view only Echo Requests or Replies:
    -   `icmp.type == 8` for requests
    -   `icmp.type == 0` for replies
-   Right-click a packet ‚Üí Follow ‚Üí ICMP Stream (if available) to see the full conversation.
-   Check Sequence Number and Identifier to track matching requests/replies.
